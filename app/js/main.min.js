const body=document.body,modal=document.querySelector(".modal"),btnRegister=document.getElementById("buttonOpenRegister"),btnCloseRegister=document.getElementById("buttonCloseRegister");window.addEventListener("keydown",(function(e){const t=document.body,o=document.querySelector(".modal__complete"),s=document.querySelector(".modal");"Escape"===e.key&&(o.classList.contains("modal__complete--active")?(o.classList.remove("modal__complete--active"),t.classList.remove("body--complete"),setTimeout((()=>{t.classList.remove("body--active"),s.classList.remove("modal--active"),s.scrollTop=0}),600)):s.classList.contains("modal--active")&&(t.classList.remove("body--active"),s.classList.remove("modal--active"),s.scrollTop=0))})),btnRegister.addEventListener("click",(function(){body.classList.add("body--active"),modal.classList.add("modal--active")})),btnCloseRegister.addEventListener("click",(function(){body.classList.remove("body--active"),modal.classList.remove("modal--active"),modal.scrollTop=0})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".modal__form"),t=document.getElementById("email"),o=document.getElementById("password"),s=document.getElementById("emailError"),n=document.getElementById("emailErrorLength"),l=document.getElementById("emailErrorEmpty"),d=document.getElementById("passwordErrorSymbols"),r=document.getElementById("passwordErrorMin"),c=document.getElementById("passwordErrorMax"),a=document.getElementById("passwordRepeat"),m=document.getElementById("passwordRepeatError"),i=document.getElementById("telegram"),u=document.getElementById("telegramError"),y=document.getElementById("telegramErrorMin");let g=!1,v=!1,E=!1,L=!1,p=!1,b=!1;const I=()=>{const e=t.value.trim();g=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),s.classList.toggle("error--active",!g);const o=e.length<=80;n.classList.toggle("error--active",!o);const d=v&&""===e;l.classList.toggle("error--active",d),s.classList.toggle("error--active",!d&&!g),g=g&&!d},_=()=>{const e=o.value.trim(),t=a.value.trim();let s=!0;d.classList.toggle("error--active",/[а-яА-ЯЁё]/.test(e)),r.classList.toggle("error--active",e.length<8),c.classList.toggle("error--active",e.length>60),""!==t&&L&&(s=e===t,m.classList.toggle("error--active",!s)),E=!(/[а-яА-ЯЁё]/.test(e)||e.length<8||e.length>60||!s)};o.addEventListener("blur",(()=>{L=!0,_()})),o.addEventListener("input",(()=>{_()})),a.addEventListener("blur",(()=>{L&&_()})),a.addEventListener("input",(()=>{L&&_()})),t.addEventListener("blur",(()=>{v=!0,I()})),t.addEventListener("input",I);const B=()=>{const e=i.value.trim();p=/^[a-z0-9_]{5,32}$/.test(e),u.classList.toggle("error--active",!p);const t=e.length>=5&&e.length<=32;y.classList.toggle("error--active",!t),p=p&&t};i.addEventListener("blur",(()=>{b=!0,B()})),i.addEventListener("input",(()=>{b&&B()}));const f=()=>{const e=document.body,t=document.getElementById("modalComplete");e.classList.remove("body--complete"),t.classList.remove("modal__complete--active"),t.style.transform="translate(-50%, 20%)",t.style.zIndex="0",t.style.opacity="0",t.style.transition="all .8s ease-in-out",t.style.pointerEvents="none",setTimeout((()=>{t.style.opacity="",t.style.transform="",t.style.pointerEvents="",t.style.zIndex="",t.style.transition=""}),700)};document.addEventListener("click",(e=>{const t=document.getElementById("modalComplete");t.classList.contains("modal__complete--active")&&!t.contains(e.target)&&f()})),e.addEventListener("submit",(e=>{I(),_(),B(),g&&E&&p?(e.preventDefault(),(()=>{const e=document.body,t=document.getElementById("modalComplete");e.classList.add("body--complete"),t.classList.add("modal__complete--active")})()):e.preventDefault()}));const C=document.getElementById("modalCloseCompleteIcon"),k=document.getElementById("modalCloseComplete");C.addEventListener("click",f),k.addEventListener("click",f)})),document.getElementById("buttonError").addEventListener("click",(function(){document.querySelector(".modal__error-info").style.display="block",document.querySelector(".modal__error").style.display="block",setTimeout((function(){document.querySelector(".modal__error-info").style.display="none",document.querySelector(".modal__error").style.display="none"}),5e3)}));