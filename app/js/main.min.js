const body=document.body,modal=document.querySelector(".modal"),btnRegister=document.getElementById("buttonOpenRegister"),btnCloseRegister=document.getElementById("buttonCloseRegister");window.addEventListener("keydown",(function(e){"Escape"===e.key&&(body.classList.remove("body--active"),modal.classList.remove("modal--active"),modal.scrollTop=0)})),btnRegister.addEventListener("click",(function(){body.classList.add("body--active"),modal.classList.add("modal--active")})),btnCloseRegister.addEventListener("click",(function(){body.classList.remove("body--active"),modal.classList.remove("modal--active"),modal.scrollTop=0})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".modal__form"),t=document.getElementById("email"),o=document.getElementById("password"),r=document.getElementById("emailError"),n=document.getElementById("emailErrorLength"),s=document.getElementById("emailErrorEmpty"),d=document.getElementById("passwordErrorSymbols"),l=document.getElementById("passwordErrorMin"),a=document.getElementById("passwordErrorMax"),c=document.getElementById("passwordRepeat"),i=document.getElementById("passwordRepeatError"),m=document.getElementById("telegram"),g=document.getElementById("telegramError"),u=document.getElementById("telegramErrorMin");let E=!1,v=!1,L=!1,y=!1,b=!1,p=!1;const B=()=>{const e=t.value.trim();E=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),r.classList.toggle("error--active",!E);const o=e.length<=80;n.classList.toggle("error--active",!o);const d=v&&""===e;s.classList.toggle("error--active",d),r.classList.toggle("error--active",!d&&!E),E=E&&!d},I=()=>{const e=o.value.trim(),t=c.value.trim();let r=!0;d.classList.toggle("error--active",/[а-яА-ЯЁё]/.test(e)),l.classList.toggle("error--active",e.length<8),a.classList.toggle("error--active",e.length>60),""!==t&&y&&(r=e===t,i.classList.toggle("error--active",!r)),L=!(/[а-яА-ЯЁё]/.test(e)||e.length<8||e.length>60||!r)};o.addEventListener("blur",(()=>{y=!0,I()})),o.addEventListener("input",(()=>{I()})),c.addEventListener("blur",(()=>{y&&I()})),c.addEventListener("input",(()=>{y&&I()})),t.addEventListener("blur",(()=>{v=!0,B()})),t.addEventListener("input",B);const w=()=>{const e=m.value.trim();b=/^[a-z0-9_]{5,32}$/.test(e),g.classList.toggle("error--active",!b);const t=e.length>=5&&e.length<=32;u.classList.toggle("error--active",!t),b=b&&t};m.addEventListener("blur",(()=>{p=!0,w()})),m.addEventListener("input",(()=>{p&&w()})),e.addEventListener("submit",(e=>{B(),I(),w(),E&&L&&b||e.preventDefault()}))}));