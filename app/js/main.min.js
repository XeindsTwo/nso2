const body=document.body,modal=document.querySelector(".modal"),btnRegister=document.getElementById("buttonOpenRegister"),btnCloseRegister=document.getElementById("buttonCloseRegister");window.addEventListener("keydown",(function(e){const t=document.body,o=document.querySelector(".modal__complete"),s=document.querySelector(".modal");"Escape"===e.key&&(o.classList.contains("modal__complete--active")?(o.classList.remove("modal__complete--active"),t.classList.remove("body--complete"),setTimeout((()=>{t.classList.remove("body--active"),s.classList.remove("modal--active"),s.scrollTop=0}),600)):s.classList.contains("modal--active")&&(t.classList.remove("body--active"),s.classList.remove("modal--active"),s.scrollTop=0))})),btnRegister.addEventListener("click",(function(){body.classList.add("body--active"),modal.classList.add("modal--active")})),btnCloseRegister.addEventListener("click",(function(){body.classList.remove("body--active"),modal.classList.remove("modal--active"),modal.scrollTop=0})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".modal__form"),t=document.getElementById("email"),o=document.getElementById("password"),s=document.getElementById("emailError"),l=document.getElementById("emailErrorLength"),n=document.getElementById("emailErrorEmpty"),d=document.getElementById("passwordErrorSymbols"),a=document.getElementById("passwordErrorMin"),c=document.getElementById("passwordErrorMax"),r=document.getElementById("passwordRepeat"),m=document.getElementById("passwordRepeatError"),i=document.getElementById("telegram"),u=document.getElementById("telegramError"),v=document.getElementById("telegramErrorMin");let g=!1,y=!1,E=!1,L=!1,p=!1,b=!1;const I=document.getElementById("modalCloseCompleteIcon"),B=document.getElementById("modalCloseComplete"),_=(document.querySelector(".modal__complete"),document.querySelector(".modal"),()=>{const e=t.value.trim();g=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),s.classList.toggle("error--active",!g);const o=e.length<=80;l.classList.toggle("error--active",!o);const d=y&&""===e;n.classList.toggle("error--active",d),s.classList.toggle("error--active",!d&&!g),g=g&&!d}),C=()=>{const e=o.value.trim(),t=r.value.trim();let s=!0;d.classList.toggle("error--active",/[а-яА-ЯЁё]/.test(e)),a.classList.toggle("error--active",e.length<8),c.classList.toggle("error--active",e.length>60),""!==t&&L&&(s=e===t,m.classList.toggle("error--active",!s)),E=!(/[а-яА-ЯЁё]/.test(e)||e.length<8||e.length>60||!s)};o.addEventListener("blur",(()=>{L=!0,C()})),o.addEventListener("input",(()=>{C()})),r.addEventListener("blur",(()=>{L&&C()})),r.addEventListener("input",(()=>{L&&C()})),t.addEventListener("blur",(()=>{y=!0,_()})),t.addEventListener("input",_);const f=()=>{const e=i.value.trim();p=/^[a-z0-9_]{5,32}$/.test(e),u.classList.toggle("error--active",!p);const t=e.length>=5&&e.length<=32;v.classList.toggle("error--active",!t),p=p&&t};i.addEventListener("blur",(()=>{b=!0,f()})),i.addEventListener("input",(()=>{b&&f()}));const w=()=>{const e=document.body,t=document.querySelector(".modal"),o=document.getElementById("modalComplete");e.classList.remove("body--complete"),o.classList.remove("modal__complete--active"),o.style.transform="translate(-50%, 20%)",o.style.zIndex="0",o.style.opacity="0",o.style.transition="all .8s ease-in-out",o.style.pointerEvents="none",setTimeout((()=>{e.classList.remove("body--active"),t.classList.remove("modal--active")}),600),setTimeout((()=>{o.style.opacity="",o.style.transform="",o.style.pointerEvents="",o.style.zIndex="",o.style.transition=""}),700)};document.addEventListener("click",(e=>{const t=document.getElementById("modalComplete");t.classList.contains("modal__complete--active")&&!t.contains(e.target)&&w()})),e.addEventListener("submit",(e=>{_(),C(),f(),g&&E&&p?(e.preventDefault(),(()=>{const e=document.body,t=document.getElementById("modalComplete");e.classList.add("body--complete"),t.classList.add("modal__complete--active")})()):e.preventDefault()})),I.addEventListener("click",w),B.addEventListener("click",w)}));